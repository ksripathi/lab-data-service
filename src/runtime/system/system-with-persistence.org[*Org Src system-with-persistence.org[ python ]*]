class TestUpdateInstitute(TestCase):
    TESTING = True

    def create_app(self):
        app = create_app(config)
        return app

    def setUp(self):
        db.create_all()

    def tearDown(self):
        db.session.remove()
        db.drop_all()

    def test_update_institute(self):

        print "test_update_institute_in_system_persistence"
        session_cls = System.delegate.entities['session']
        institute_cls = System.delegate.entities['institute']

        inst_name1="IIT Kanpur"
        inst_id1="IITK"
        key = KEY
        session = session_cls(key=key)
        institute = institute_cls(inst_id=inst_id1, inst_name=inst_name1)

        institute.save()

        inst_name2="IIT Kharagpur"

        institute1 = System.do("update_institute", inst_name=inst_name2,
                                  inst_id=inst_id1, session=session)

        new_institute = institute_cls.get_by_id(1)

        self.assertEqual(new_institute.get("inst_name"), inst_name2)
